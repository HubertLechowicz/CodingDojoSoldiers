from src.training import train, transform_to_str, init


def test_init():
    assert init() == [
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
    ]


def test_transform_to_str():
    array = [
        [" ", "↑", " "],
        [" ", "↑", " "],
        [" ", "↑", " "],
    ]

    assert transform_to_str(array) == (
        "[' ', '↑', ' ']\n"
        "[' ', '↑', ' ']\n"
        "[' ', '↑', ' ']"
    )


def test_train_with_order_turn_on_me():
    field = [
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
    ]
    result = train("Turn on me!", field)

    expected_result = [
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", "↑", "↑", "↑", " ", " "],
        [" ", " ", "↑", "↑", "↑", " ", " "],
        [" ", " ", "↑", "↑", "↑", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
    ]
    assert result == expected_result


def test_turn_west():
    field = [
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
    ]
    result = train("Turn West!", field)

    expected_result = [
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", "←", "←", "←", " ", " "],
        [" ", " ", "←", "←", "←", " ", " "],
        [" ", " ", "←", "←", "←", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
    ]
    assert result == expected_result


def test_turn_south():
    field = [
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
    ]
    result = train("Turn South!", field)

    expected_result = [
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
    ]
    assert result == expected_result


def test_turn_east():
    field = [
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", "↓", "↓", "↓", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
    ]
    result = train("Turn East!", field)

    expected_result = [
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", "→", "→", "→", " ", " "],
        [" ", " ", "→", "→", "→", " ", " "],
        [" ", " ", "→", "→", "→", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
        [" ", " ", " ", " ", " ", " ", " "],
    ]
    assert result == expected_result
